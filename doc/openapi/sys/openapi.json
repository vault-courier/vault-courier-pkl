{
  "openapi": "3.0.3",
  "info": {
    "title": "Vault Courier Authentication API",
    "version": "0.2.0",
    "description": "API client for Hashicorp Vault and OpenBao",
    "license": {
      "name": "Apache License 2.0"
    }
  },
  "servers": [
    {
      "url": "https://127.0.0.1:8200/v1",
      "description": "Default https server url"
    }
  ],
  "paths": {
    "/sys/wrapping/wrap": {
      "description": "Wraps the given user-supplied json data inside a response-wrapped token.",
      "post": {
        "tags": [
          "wrapping"
        ],
        "operationId": "wrap",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VaultWrappedResponse"
                }
              }
            }
          },
          "400": {
            "description": "BadRequest",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VaultErrorsResponseBody"
                }
              }
            }
          }
        }
      },
      "parameters": [
        {
          "$ref": "#/components/parameters/VaultTokenHeader"
        },
        {
          "$ref": "#/components/parameters/WrapTTLHeader"
        }
      ]
    },
    "/sys/wrapping/rewrap": {
      "description": "Rewraps an existing response-wrapped token. The newly generated token inherits the original token's creation TTL and preserves the same response data. Once rewrapped, the old token is invalidated. This mechanism is useful for securely storing secrets in response-wrapped tokens when periodic rotation is required.",
      "post": {
        "tags": [
          "wrapping"
        ],
        "operationId": "rewrap",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "token": {
                    "type": "string"
                  }
                },
                "required": [
                  "token"
                ]
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VaultWrappedResponse"
                }
              }
            }
          },
          "400": {
            "description": "BadRequest",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VaultErrorsResponseBody"
                }
              }
            }
          }
        }
      },
      "parameters": [
        {
          "$ref": "#/components/parameters/VaultTokenHeader"
        }
      ]
    },
    "/sys/wrapping/unwrap": {
      "description": "Unwraps a wrapped response",
      "post": {
        "tags": [
          "wrapping"
        ],
        "operationId": "unwrap",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "token": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VaultApiResponse"
                }
              }
            }
          },
          "400": {
            "description": "BadRequest",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VaultErrorsResponseBody"
                }
              }
            }
          }
        }
      },
      "parameters": [
        {
          "$ref": "#/components/parameters/VaultTokenHeader"
        }
      ]
    },
    "/sys/wrapping/lookup": {
      "description": "Looks up wrapping properties for the given token",
      "post": {
        "tags": [
          "wrapping"
        ],
        "operationId": "lookup",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "token": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "request_id": {
                      "type": "string"
                    },
                    "lease_id": {
                      "type": "string"
                    },
                    "renewable": {
                      "type": "boolean"
                    },
                    "lease_duration": {
                      "type": "integer"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "creation_path": {
                          "type": "string"
                        },
                        "creation_time": {
                          "type": "string"
                        },
                        "creation_ttl": {
                          "type": "integer"
                        }
                      },
                      "required": [
                        "creation_path",
                        "creation_time",
                        "creation_ttl"
                      ]
                    },
                    "wrap_info": {
                      "type": "object"
                    },
                    "warnings": {
                      "type": "array",
                      "description": "A list of warnings, e.g. ignored parameters",
                      "items": {
                        "type": "string"
                      }
                    },
                    "auth": {
                      "type": "object"
                    },
                    "mount_type": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "request_id",
                    "data"
                  ]
                }
              }
            }
          },
          "400": {
            "description": "BadRequest",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VaultErrorsResponseBody"
                }
              }
            }
          }
        }
      },
      "parameters": [
        {
          "$ref": "#/components/parameters/VaultTokenHeader"
        }
      ]
    },
    "/sys/auth/{path}": {
      "description": "Enable a new credential backend with a name.",
      "get": {
        "tags": [
          "auth"
        ],
        "summary": "Get AuthMethod Config",
        "description": "This endpoints returns the configuration of the auth method at the given path. This endpoint requires `sudo` capability on the final path, but the same functionality can be achieved without sudo via `sys/mounts/auth/[auth-path]`.",
        "operationId": "auth-read-method",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReadAuthMethodResponse"
                }
              }
            }
          },
          "400": {
            "description": "BadRequest",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VaultErrorsResponseBody"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "auth"
        ],
        "summary": "Enable AuthMethod",
        "description": "After enabling, the auth method can be accessed and configured via the auth path specified as part of the URL. This auth path will be nested under the auth prefix.\n\nFor example, enable the \"foo\" auth method will make it accessible at `/auth/foo`.",
        "operationId": "auth-enable-method",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AuthEnableMethodRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "204": {
            "description": "NoContent"
          },
          "400": {
            "description": "BadRequest",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VaultErrorsResponseBody"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "auth"
        ],
        "summary": "Disable AuthMethod",
        "description": "This endpoint disables the auth method at the given auth path. This endpoint requires sudo capability in addition to any path-specific capabilities.",
        "operationId": "auth-disable-method",
        "responses": {
          "204": {
            "description": "NoContent"
          },
          "400": {
            "description": "BadRequest",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VaultErrorsResponseBody"
                }
              }
            }
          }
        }
      },
      "parameters": [
        {
          "description": "The path to mount to. Cannot be delimited. Example: \"user\"",
          "name": "path",
          "in": "path",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "$ref": "#/components/parameters/VaultTokenHeader"
        }
      ]
    },
    "/sys/policies/acl/{name}": {
      "description": "Read, Modify, or Delete an access control policy.",
      "get": {
        "tags": [
          "policies"
        ],
        "summary": "Read ACL policy.",
        "description": "Retrieves information about the named ACL policy",
        "operationId": "policies-read-acl-policy",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReadACLPolicyResponse"
                }
              }
            }
          },
          "400": {
            "description": "BadRequest",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VaultErrorsResponseBody"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "policies"
        ],
        "summary": "Add/update ACL policy.",
        "description": "Add a new or update an existing ACL policy.",
        "operationId": "policies-write-acl-policy",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PoliciesWriteAclPolicyRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "204": {
            "description": "NoContent"
          },
          "400": {
            "description": "BadRequest",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VaultErrorsResponseBody"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "policies"
        ],
        "summary": "Delete Policy",
        "description": "Deletes the ACL policy with the given name. This will immediately affect all users associated with this policy. (A deleted policy set on a token acts as an empty policy.)",
        "operationId": "policies-delete-acl-policy",
        "responses": {
          "204": {
            "description": "NoContent"
          },
          "400": {
            "description": "BadRequest",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VaultErrorsResponseBody"
                }
              }
            }
          }
        }
      },
      "parameters": [
        {
          "description": "The name of the policy. Example: \"ops\"",
          "name": "name",
          "in": "path",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "$ref": "#/components/parameters/VaultTokenHeader"
        }
      ]
    },
    "/sys/mounts/{path}": {
      "description": "Mount a new backend at a new path. Example: KV2",
      "get": {
        "tags": [
          "mounts"
        ],
        "summary": "Get SecretEngine Config",
        "description": "Returns the configuration of a specific secret engine",
        "operationId": "mounts-read-secrets-engine",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SecretsEngineConfigResponse"
                }
              }
            }
          },
          "400": {
            "description": "BadRequest",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VaultErrorsResponseBody"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "mounts"
        ],
        "summary": "Enable Secret Engine",
        "description": "Enable a new secrets engine at the given path.",
        "operationId": "mounts-enable-secrets-engine",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MountsEnableSecretsEngineRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "204": {
            "description": "NoContent"
          },
          "400": {
            "description": "BadRequest",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VaultErrorsResponseBody"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "mounts"
        ],
        "summary": "Disable Secret Engine",
        "description": "disables the mount point specified in the URL",
        "operationId": "mounts-disable-secrets-engine",
        "responses": {
          "204": {
            "description": "NoContent"
          },
          "400": {
            "description": "BadRequest",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VaultErrorsResponseBody"
                }
              }
            }
          }
        }
      },
      "parameters": [
        {
          "description": "The path to mount to. Example: \"aws/east\"",
          "name": "path",
          "in": "path",
          "required": true,
          "schema": {
            "type": "string"
          }
        },
        {
          "$ref": "#/components/parameters/VaultTokenHeader"
        }
      ]
    }
  },
  "components": {
    "schemas": {
      "AuthEnableMethodRequest": {
        "type": "object",
        "properties": {
          "config": {
            "type": "object",
            "format": "map",
            "description": "Configuration for this mount, such as plugin_name."
          },
          "description": {
            "type": "string",
            "description": "User-friendly description for this credential backend."
          },
          "local": {
            "type": "boolean",
            "description": "Mark the mount as a local mount, which is not replicated and is unaffected by replication.",
            "default": false
          },
          "options": {
            "type": "object",
            "format": "kvpairs",
            "description": "The options to pass into the backend. Should be a json object with string keys and values."
          },
          "seal_wrap": {
            "type": "boolean",
            "description": "Whether to turn on seal wrapping for the mount.",
            "default": false
          },
          "type": {
            "type": "string",
            "description": "The type of the backend. Example: \"userpass\""
          }
        }
      },
      "ReadAuthMethodResponse": {
        "type": "object",
        "properties": {
          "request_id": {
            "type": "string",
            "description": "the id of the request associated with this response"
          },
          "data": {
            "type": "object",
            "properties": {
              "accessor": {
                "type": "string"
              },
              "external_entropy_access": {
                "type": "boolean"
              },
              "local": {
                "type": "boolean"
              },
              "config": {
                "type": "object",
                "format": "kvpairs",
                "description": "Configuration for this mount, such as `plugin_name`."
              },
              "options": {
                "type": "object",
                "format": "kvpairs",
                "description": "The options to pass into the backend"
              },
              "seal_wrap": {
                "type": "boolean",
                "description": "Whether to turn on seal wrapping for the mount."
              },
              "description": {
                "type": "string"
              },
              "type": {
                "type": "string",
                "description": "The type of the backend. Example: \"userpass\""
              }
            },
            "required": [
              "type",
              "config"
            ]
          },
          "mount_type": {
            "type": "string"
          }
        },
        "required": [
          "data"
        ]
      },
      "PoliciesWriteAclPolicyRequest": {
        "type": "object",
        "properties": {
          "policy": {
            "type": "string",
            "description": "The rules of the policy."
          }
        }
      },
      "ReadACLPolicyResponse": {
        "type": "object",
        "properties": {
          "request_id": {
            "type": "string"
          },
          "lease_id": {
            "type": "string"
          },
          "renewable": {
            "type": "boolean"
          },
          "lease_duration": {
            "type": "integer"
          },
          "data": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "description": "The name of the policy."
              },
              "policy": {
                "type": "string",
                "description": "The rules of the policy."
              }
            },
            "required": [
              "name",
              "policy"
            ]
          },
          "wrap_info": {
            "type": "object"
          },
          "warnings": {
            "type": "array",
            "description": "A list of warnings, e.g. ignored parameters",
            "items": {
              "type": "string"
            }
          },
          "auth": {
            "type": "object"
          },
          "mount_type": {
            "type": "string"
          }
        },
        "required": [
          "request_id",
          "data"
        ]
      },
      "MountsEnableSecretsEngineRequest": {
        "type": "object",
        "properties": {
          "config": {
            "type": "object",
            "format": "map",
            "description": "Configuration for this mount, such as `default_lease_ttl` and `max_lease_ttl`."
          },
          "description": {
            "type": "string",
            "description": "User-friendly description for this mount."
          },
          "external_entropy_access": {
            "type": "boolean",
            "description": "Whether to give the mount access to Vault's external entropy.",
            "default": false
          },
          "local": {
            "type": "boolean",
            "description": "Mark the mount as a local mount, which is not replicated and is unaffected by replication.",
            "default": false
          },
          "options": {
            "type": "object",
            "format": "kvpairs",
            "description": "The options to pass into the backend. Should be a json object with string keys and values."
          },
          "plugin_name": {
            "type": "string",
            "description": "Name of the plugin to mount based from the name registered in the plugin catalog."
          },
          "plugin_version": {
            "type": "string",
            "description": "The semantic version of the plugin to use, or image tag if `oci_image` is provided."
          },
          "seal_wrap": {
            "type": "boolean",
            "description": "Whether to turn on seal wrapping for the mount.",
            "default": false
          },
          "type": {
            "type": "string",
            "description": "The type of the backend. Example: \"passthrough\""
          }
        }
      },
      "SecretsEngineConfigResponse": {
        "type": "object",
        "properties": {
          "request_id": {
            "type": "string"
          },
          "lease_id": {
            "type": "string"
          },
          "renewable": {
            "type": "boolean"
          },
          "lease_duration": {
            "type": "integer"
          },
          "data": {
            "type": "object",
            "properties": {
              "config": {
                "anyOf": [
                  {
                    "oneOf": [
                      {
                        "type": "object",
                        "properties": {
                          "default_lease_ttl": {
                            "type": "integer"
                          },
                          "force_no_cache": {
                            "type": "boolean"
                          },
                          "max_lease_ttl": {
                            "type": "integer"
                          }
                        },
                        "required": [
                          "default_lease_ttl",
                          "force_no_cache",
                          "max_lease_ttl"
                        ]
                      },
                      {
                        "type": "object",
                        "format": "map"
                      }
                    ]
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "accessor": {
                "type": "string"
              },
              "description": {
                "type": "string",
                "description": "User-friendly description for this mount."
              },
              "external_entropy_access": {
                "type": "boolean",
                "description": "Whether to give the mount access to Vault's external entropy.",
                "default": false
              },
              "local": {
                "type": "boolean",
                "description": "Mark the mount as a local mount, which is not replicated and is unaffected by replication.",
                "default": false
              },
              "options": {
                "type": "object",
                "format": "kvpairs",
                "description": "The options to pass into the backend. Should be a json object with string keys and values."
              },
              "plugin_version": {
                "type": "string",
                "description": "The semantic version of the plugin to use, or image tag if `oci_image` is provided."
              },
              "running_plugin_version": {
                "type": "string"
              },
              "seal_wrap": {
                "type": "boolean",
                "description": "Whether to turn on seal wrapping for the mount.",
                "default": false
              },
              "type": {
                "type": "string",
                "description": "The type of the backend. Example: \"passthrough\""
              }
            }
          },
          "wrap_info": {
            "type": "object"
          },
          "warnings": {
            "type": "array",
            "description": "A list of warnings, e.g. ignored parameters",
            "items": {
              "type": "string"
            }
          },
          "auth": {
            "type": "object"
          },
          "mount_type": {
            "type": "string"
          }
        },
        "required": [
          "request_id",
          "data"
        ]
      },
      "VaultApiResponse": {
        "type": "object",
        "properties": {
          "request_id": {
            "type": "string"
          },
          "lease_id": {
            "type": "string"
          },
          "renewable": {
            "type": "boolean"
          },
          "lease_duration": {
            "type": "integer"
          },
          "data": {
            "type": "object"
          },
          "wrap_info": {
            "type": "object"
          },
          "warnings": {
            "type": "array",
            "description": "A list of warnings, e.g. ignored parameters",
            "items": {
              "type": "string"
            }
          },
          "auth": {
            "type": "object"
          },
          "mount_type": {
            "type": "string"
          }
        },
        "required": [
          "request_id"
        ]
      },
      "VaultAuthResponse": {
        "type": "object",
        "properties": {
          "request_id": {
            "type": "string"
          },
          "lease_id": {
            "type": "string"
          },
          "renewable": {
            "type": "boolean"
          },
          "lease_duration": {
            "type": "integer"
          },
          "data": {
            "type": "object"
          },
          "wrap_info": {
            "type": "object"
          },
          "warnings": {
            "type": "array",
            "description": "A list of warnings, e.g. ignored parameters",
            "items": {
              "type": "string"
            }
          },
          "auth": {
            "type": "object",
            "properties": {
              "client_token": {
                "type": "string"
              },
              "accessor": {
                "type": "string"
              },
              "token_policies": {
                "type": "array",
                "description": "A list of policies for the token. This must be a subset of the policies belonging to the token making the request, unless the calling token is root or contains sudo capabilities to auth/token/create. If not specified, defaults to all the policies of the calling token.",
                "items": {
                  "type": "string"
                }
              },
              "metadata": {
                "type": "object",
                "format": "kvpairs",
                "description": "Arbitrary key=value metadata to associate with the token",
                "additionalProperties": {
                  "type": "string"
                }
              },
              "lease_duration": {
                "type": "integer"
              },
              "renewable": {
                "type": "boolean"
              },
              "entity_id": {
                "type": "string"
              },
              "token_type": {
                "type": "string",
                "enum": [
                  "batch",
                  "service",
                  "default",
                  "default-service",
                  "default-batch"
                ]
              },
              "orphan": {
                "type": "boolean"
              },
              "mfa_requirement": {
                "type": "boolean"
              },
              "num_uses": {
                "type": "integer"
              }
            },
            "required": [
              "client_token",
              "accessor",
              "token_policies",
              "lease_duration",
              "token_type",
              "orphan",
              "num_uses",
              "renewable"
            ]
          },
          "mount_type": {
            "type": "string"
          }
        },
        "required": [
          "request_id",
          "auth"
        ]
      },
      "VaultWrappedResponse": {
        "type": "object",
        "properties": {
          "request_id": {
            "type": "string"
          },
          "lease_id": {
            "type": "string"
          },
          "renewable": {
            "type": "boolean"
          },
          "lease_duration": {
            "type": "integer"
          },
          "data": {
            "type": "object"
          },
          "wrap_info": {
            "type": "object",
            "properties": {
              "token": {
                "type": "string"
              },
              "ttl": {
                "type": "integer"
              },
              "creation_time": {
                "type": "string"
              },
              "accessor": {
                "type": "string"
              },
              "creation_path": {
                "type": "string"
              },
              "wrapped_accessor": {
                "type": "string"
              }
            },
            "required": [
              "token",
              "accessor",
              "ttl",
              "creation_time",
              "creation_path"
            ]
          },
          "warnings": {
            "type": "array",
            "description": "A list of warnings, e.g. ignored parameters",
            "items": {
              "type": "string"
            }
          },
          "auth": {
            "type": "object"
          },
          "mount_type": {
            "type": "string"
          }
        },
        "required": [
          "request_id",
          "wrap_info"
        ]
      },
      "VaultErrorsResponseBody": {
        "type": "object",
        "properties": {
          "errors": {
            "type": "array",
            "description": "List of errors",
            "items": {
              "type": "string"
            }
          }
        }
      }
    },
    "parameters": {
      "VaultTokenHeader": {
        "description": "Vault Token required for authentication",
        "name": "X-Vault-Token",
        "in": "header",
        "schema": {
          "type": "string"
        }
      },
      "WrapTTLHeader": {
        "description": "Use the X-Vault-Wrap-TTL header with any Vault API call where you want to wrap the response.",
        "name": "X-Vault-Wrap-TTL",
        "in": "header",
        "schema": {
          "type": "string"
        }
      }
    }
  },
  "tags": [
    {
      "name": "policies"
    },
    {
      "name": "wrapping"
    }
  ]
}
